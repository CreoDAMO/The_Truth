// SPDX-License-Identifier: MIT
pragma solidity ^0.8.27;

import "@openzeppelin/contracts/token/ERC721/ERC721.sol";
import "@openzeppelin/contracts/token/ERC721/extensions/ERC721Enumerable.sol";
import "@openzeppelin/contracts/token/common/ERC2981.sol";
import "@openzeppelin/contracts/access/Ownable.sol";
import "@openzeppelin/contracts/utils/ReentrancyGuard.sol";
import "@openzeppelin/contracts/utils/Strings.sol";

/**
 * @title The Truth Part Three - Applying The Law's & Creating The Blackpaper
 * @dev NFT contract implementing foundation-first legal architecture
 * @author Jacque Antoine DeGraff - Master of Nothing, Student of All Things
 */
contract TruthPartThree is ERC721, ERC721Enumerable, ERC2981, Ownable, ReentrancyGuard {
    // Collection constants
    uint256 public constant MAX_SUPPLY = 444;
    uint256 public constant PUBLIC_SUPPLY = 443;
    uint256 public constant MASTER_COPY_ID = 444;
    uint256 public constant PRICE = 478719895287958000; // ~0.4787 ETH ($1777)
    
    // Collection state
    uint256 private _tokenIdCounter = 1;
    string private _baseTokenURI;
    bool public mintingEnabled = false;
    
    // Minting limits
    mapping(address => bool) public hasMinted;
    
    // Provenance
    string public provenance;
    bool private provenanceLocked = false;
    
    // Treasury
    address public treasury;
    bool public treasuryIsMultisig = false;
    
    // Blackpaper specific
    string public blackpaperVersion = "1.0";
    string public legalFoundation = "Foundation Before Framework";
    
    // Events
    event MintingToggled(bool enabled);
    event BaseURIUpdated(string newBaseURI);
    event BlackpaperMinted(address indexed to, uint256 indexed tokenId);
    event ProvenanceSet(string provenance);
    event TreasuryUpdated(address treasury, bool multisig);
    event LegalFoundationWitnessed(address indexed witness, uint256 indexed tokenId);
    
    constructor(
        address initialOwner,
        string memory baseURI,
        address initialTreasury
    ) ERC721("The Truth Part Three - Applying The Laws", "LAWS") Ownable(initialOwner) {
        _baseTokenURI = baseURI;
        _setDefaultRoyalty(initialOwner, 1000); // 10%
        treasury = initialTreasury;
        
        // Mint master copy #444 to owner
        _safeMint(initialOwner, MASTER_COPY_ID);
        emit BlackpaperMinted(initialOwner, MASTER_COPY_ID);
        emit LegalFoundationWitnessed(initialOwner, MASTER_COPY_ID);
    }
    
    // Public minting function
    function mintBlackpaper() external payable nonReentrant {
        require(mintingEnabled, "Minting not enabled");
        require(_tokenIdCounter <= PUBLIC_SUPPLY, "Public supply exhausted");
        require(msg.value >= PRICE, "Insufficient payment");
        require(!hasMinted[msg.sender], "Already minted");
        
        uint256 tokenId = _tokenIdCounter;
        _tokenIdCounter++;
        
        _safeMint(msg.sender, tokenId);
        hasMinted[msg.sender] = true;
        
        // Refund excess payment
        if (msg.value > PRICE) {
            payable(msg.sender).transfer(msg.value - PRICE);
        }
        
        emit BlackpaperMinted(msg.sender, tokenId);
        emit LegalFoundationWitnessed(msg.sender, tokenId);
    }
    
    // Owner functions
    function toggleMinting() external onlyOwner {
        mintingEnabled = !mintingEnabled;
        emit MintingToggled(mintingEnabled);
    }
    
    function setBaseURI(string calldata newBaseURI) external onlyOwner {
        _baseTokenURI = newBaseURI;
        emit BaseURIUpdated(newBaseURI);
    }
    
    function setProvenance(string calldata prov) external onlyOwner {
        require(!provenanceLocked, "Provenance locked");
        provenance = prov;
        provenanceLocked = true;
        emit ProvenanceSet(prov);
    }
    
    function setTreasury(address _treasury, bool _isMultisig) external onlyOwner {
        require(_treasury != address(0), "Zero address");
        treasury = _treasury;
        treasuryIsMultisig = _isMultisig;
        emit TreasuryUpdated(_treasury, _isMultisig);
    }
    
    function withdraw() external onlyOwner {
        uint256 balance = address(this).balance;
        require(balance > 0, "No funds to withdraw");
        address payable dest = payable(treasury == address(0) ? owner() : treasury);
        (bool success, ) = dest.call{value: balance}("");
        require(success, "Withdrawal failed");
    }
    
    // View functions
    function totalMinted() external view returns (uint256) {
        return _tokenIdCounter - 1;
    }
    
    function publicMinted() external view returns (uint256) {
        uint256 total = _tokenIdCounter - 1;
        return total > 0 ? total - 1 : 0;
    }
    
    function remainingSupply() external view returns (uint256) {
        if (_tokenIdCounter > PUBLIC_SUPPLY) return 0;
        return PUBLIC_SUPPLY - (_tokenIdCounter - 1);
    }
    
    function getBlackpaperInfo() external view returns (string memory version, string memory foundation) {
        return (blackpaperVersion, legalFoundation);
    }
    
    function tokenURI(uint256 tokenId) public view override returns (string memory) {
        require(_exists(tokenId), "ERC721Metadata: URI query for nonexistent token");
        return string(abi.encodePacked(_baseTokenURI, Strings.toString(tokenId), ".json"));
    }
    
    // Required overrides
    function _beforeTokenTransfer(address from, address to, uint256 tokenId)
        internal
        override(ERC721, ERC721Enumerable)
    {
        super._beforeTokenTransfer(from, to, tokenId);
    }
    
    function supportsInterface(bytes4 interfaceId)
        public
        view
        override(ERC721, ERC721Enumerable, ERC2981)
        returns (bool)
    {
        return super.supportsInterface(interfaceId);
    }
}

I've created the smart contract for "The Truth Part Three - Applying The Law's & Creating The Blackpaper" following the same architectural patterns as your previous contracts.

The contract includes:
- 444 total supply (443 public + 1 Master Copy)
- Price at 0.4787 ETH (~$1777)
- Same security features (ReentrancyGuard, one mint per wallet)
- ERC-2981 royalty standard (10%)
- Master Copy reserved as token #444
- Additional Blackpaper-specific functions and events

The contract maintains the same structure as TheTruth.sol and TruthBonusGift.sol while incorporating the legal positioning theme through contract variables like `legalFoundation` and specialized events like `LegalFoundationWitnessed`.

----

# The Truth Part Three - Metadata (All Formats)

## 1. JSON Format - metadata/part-three.json

```json
{
  "name": "The Truth Part Three - Applying The Law's & Creating The Blackpaper",
  "description": "The doctrinal foundation - an NFT preserving the comprehensive legal architecture that grounds The Truth ecosystem in Black's Law Dictionary principles rather than regulatory compliance frameworks.\n\nThis collection immortalizes the foundation-first approach: building upon bedrock legal doctrine (property law, trust law, fiduciary duty, contract law) before overlaying statutory requirements. The Blackpaper demonstrates how to apply Law rather than practice legal compliance.\n\n**Core Legal Mappings:**\n- NFTs as Choses in Action (intangible personal property)\n- Provenance as Trust Corpus (fiduciary relationships)\n- Admin Keys as Agency (corporate governance)\n- Revenue as General Intangibles (UCC Article 9)\n- Holder Rights as Licenses (contractual permissions)\n\n**Equitable Maxims Applied:**\n- Equity regards as done that which ought to be done\n- A grantor shall not derogate from his own grant\n- Trust will not fail for want of a trustee\n- Between equal equities, the first in time prevails\n\nEach edition contains the complete legal archive: Cover Image, Executive Summary Audio, Blackpaper PDF, and 3 Comics documenting the mirror effect where institutional critiques reflect their own contradictions.\n\n**444 editions total:**\n- 443 offered to the world at $1777 each\n- 1 Master Copy reserved as priceless\n- 10% royalties on secondary sales\n\n**Foundation Principle:**\n'You've placed framework over foundation, that is a house built on sand. I've placed foundation before framework, that is a house built on a rock.' — Jacque Antoine DeGraff\n\n**The Doctrinal Mirror:**\nRegulatory challenges to properly applied law become challenges to law itself. Any agency arguing against documented property rights, fiduciary relationships, and contractual licensing argues against the doctrinal basis of their own authority.\n\n— Jacque Antoine DeGraff\n\n*\"The Truth Doesn't Need To Be Pushed, Only The Lie...The Lie Only Needs To Be Whispered, But The Truth Always Remains Silent waiting to be Witnessed.\"*",
  "image": "ipfs://bafybeib2ujzv6k3m5t4acypn7xs3nufobsiytyrcnxh6aeevrodbuuinwu",
  "external_url": "https://github.com/CreoDAMO/SpiralParserEngine-Spiral",
  "attributes": [
    {
      "trait_type": "Author",
      "value": "Jacque Antoine DeGraff"
    },
    {
      "trait_type": "Philosophy",
      "value": "Master of Nothing, Student of All Things"
    },
    {
      "trait_type": "Education",
      "value": "9th Grade"
    },
    {
      "trait_type": "Collection",
      "value": "Part Three"
    },
    {
      "trait_type": "Type",
      "value": "Doctrinal Foundation"
    },
    {
      "trait_type": "Format",
      "value": "Cover + Audio + PDF + 3 Comics"
    },
    {
      "trait_type": "Legal Framework",
      "value": "Black's Law Dictionary"
    },
    {
      "trait_type": "Approach",
      "value": "Foundation Before Framework"
    },
    {
      "trait_type": "Supply",
      "value": "444"
    },
    {
      "trait_type": "Public Supply",
      "value": "443"
    },
    {
      "trait_type": "Master Copy",
      "value": "1 Reserved"
    },
    {
      "trait_type": "Pricing",
      "value": "$1777"
    },
    {
      "trait_type": "Max Per Wallet",
      "value": "1"
    },
    {
      "trait_type": "Royalties",
      "value": "10%"
    },
    {
      "trait_type": "Legal Strategy",
      "value": "Apply Law Not Practice Compliance"
    },
    {
      "trait_type": "Demonstration",
      "value": "Doctrinal Mirror Effect"
    }
  ],
  "properties": {
    "files": [
      {
        "uri": "ipfs://bafybeib2ujzv6k3m5t4acypn7xs3nufobsiytyrcnxh6aeevrodbuuinwu",
        "type": "image/png",
        "name": "Cover Image"
      },
      {
        "uri": "ipfs://bafybeihzptekqfp7fxcfwzi7bkh6ggwo3lmuzsrczv3k7gslktj6fh25di",
        "type": "audio/mp3",
        "name": "Executive Summary Audio"
      },
      {
        "uri": "ipfs://bafybeicrpqrpazlwhyi4dzgw45ol2rmoo6sg4sjmbd4av53wk7zgzzxbiy",
        "type": "application/pdf",
        "name": "Blackpaper PDF"
      },
      {
        "uri": "ipfs://bafybeih4fwch34ot7wiz2m5wc5cvvwez5itpnkqanhcehyj4735kg4yntq",
        "type": "image/png",
        "name": "Comic 1 - The Donkey Question"
      },
      {
        "uri": "ipfs://bafybeianuakdbawhlygcdx6dn5oqpifms7j3va4h4dwsbvjljr4cmqnuzm",
        "type": "image/png",
        "name": "Comic 2 - Mirror Effect"
      },
      {
        "uri": "ipfs://bafybeihimxklbqmdi7ugtkvorblvzxers253le2lgvaqxxnfrhhzfuuyii",
        "type": "image/png",
        "name": "Comic 3 - Foundation vs Framework"
      }
    ]
  }
}
```

## 2. CSV Format - metadata/part-three.csv

```csv
Field,Value
name,"The Truth Part Three - Applying The Law's & Creating The Blackpaper"
description,"The doctrinal foundation - an NFT preserving the comprehensive legal architecture that grounds The Truth ecosystem in Black's Law Dictionary principles rather than regulatory compliance frameworks.

This collection immortalizes the foundation-first approach: building upon bedrock legal doctrine (property law, trust law, fiduciary duty, contract law) before overlaying statutory requirements. The Blackpaper demonstrates how to apply Law rather than practice legal compliance.

**Core Legal Mappings:**
- NFTs as Choses in Action (intangible personal property)
- Provenance as Trust Corpus (fiduciary relationships)
- Admin Keys as Agency (corporate governance)
- Revenue as General Intangibles (UCC Article 9)
- Holder Rights as Licenses (contractual permissions)

**Equitable Maxims Applied:**
- Equity regards as done that which ought to be done
- A grantor shall not derogate from his own grant
- Trust will not fail for want of a trustee
- Between equal equities, the first in time prevails

Each edition contains the complete legal archive: Cover Image, Executive Summary Audio, Blackpaper PDF, and 3 Comics documenting the mirror effect where institutional critiques reflect their own contradictions.

**444 editions total:**
- 443 offered to the world at $1777 each
- 1 Master Copy reserved as priceless
- 10% royalties on secondary sales

**Foundation Principle:**
'You've placed framework over foundation, that is a house built on sand. I've placed foundation before framework, that is a house built on a rock.' — Jacque Antoine DeGraff

**The Doctrinal Mirror:**
Regulatory challenges to properly applied law become challenges to law itself. Any agency arguing against documented property rights, fiduciary relationships, and contractual licensing argues against the doctrinal basis of their own authority.

— Jacque Antoine DeGraff

*""The Truth Doesn't Need To Be Pushed, Only The Lie...The Lie Only Needs To Be Whispered, But The Truth Always Remains Silent waiting to be Witnessed.""*"
image,ipfs://bafybeib2ujzv6k3m5t4acypn7xs3nufobsiytyrcnxh6aeevrodbuuinwu
external_url,https://github.com/CreoDAMO/SpiralParserEngine-Spiral
supply,444
public_supply,443
master_copy,1
price,$1777
max_per_wallet,1
royalties,10%
master_copy_address,0x67BF9f428d92704C3Db3a08dC05Bc941A8647866
attribute_author,Jacque Antoine DeGraff
attribute_philosophy,Master of Nothing Student of All Things
attribute_education,9th Grade
attribute_collection,Part Three
attribute_type,Doctrinal Foundation
attribute_format,Cover + Audio + PDF + 3 Comics
attribute_legal_framework,Black's Law Dictionary
attribute_approach,Foundation Before Framework
attribute_supply,444
attribute_public_supply,443
attribute_master_copy,1 Reserved
attribute_pricing,$1777
attribute_max_per_wallet,1
attribute_royalties,10%
attribute_legal_strategy,Apply Law Not Practice Compliance
attribute_demonstration,Doctrinal Mirror Effect
file_1_uri,ipfs://bafybeib2ujzv6k3m5t4acypn7xs3nufobsiytyrcnxh6aeevrodbuuinwu
file_1_type,image/png
file_1_name,Cover Image
file_2_uri,ipfs://bafybeihzptekqfp7fxcfwzi7bkh6ggwo3lmuzsrczv3k7gslktj6fh25di
file_2_type,audio/mp3
file_2_name,Executive Summary Audio
file_3_uri,ipfs://bafybeicrpqrpazlwhyi4dzgw45ol2rmoo6sg4sjmbd4av53wk7zgzzxbiy
file_3_type,application/pdf
file_3_name,Blackpaper PDF
file_4_uri,ipfs://bafybeih4fwch34ot7wiz2m5wc5cvvwez5itpnkqanhcehyj4735kg4yntq
file_4_type,image/png
file_4_name,Comic 1 - The Donkey Question
file_5_uri,ipfs://bafybeianuakdbawhlygcdx6dn5oqpifms7j3va4h4dwsbvjljr4cmqnuzm
file_5_type,image/png
file_5_name,Comic 2 - Mirror Effect
file_6_uri,ipfs://bafybeihimxklbqmdi7ugtkvorblvzxers253le2lgvaqxxnfrhhzfuuyii
file_6_type,image/png
file_6_name,Comic 3 - Foundation vs Framework
```

## 3. Markdown Format - metadata/part-three.md

```markdown
# THE TRUTH PART THREE - APPLYING THE LAW'S & CREATING THE BLACKPAPER

## COLLECTION INFORMATION

**Title:** The Truth Part Three - Applying The Law's & Creating The Blackpaper

**Supply:** 444 total editions

**Pricing:** 443 public copies at $1777 each, 1 Master Copy reserved

**Max Per Wallet:** 1 edition

**Royalties:** 10%

**Master Copy Address:** 0x67BF9f428d92704C3Db3a08dC05Bc941A8647866

**External URL:** https://github.com/CreoDAMO/SpiralParserEngine-Spiral

## DESCRIPTION

The doctrinal foundation - an NFT preserving the comprehensive legal architecture that grounds The Truth ecosystem in Black's Law Dictionary principles rather than regulatory compliance frameworks.

This collection immortalizes the foundation-first approach: building upon bedrock legal doctrine (property law, trust law, fiduciary duty, contract law) before overlaying statutory requirements. The Blackpaper demonstrates how to apply Law rather than practice legal compliance.

**Core Legal Mappings:**
- NFTs as Choses in Action (intangible personal property)
- Provenance as Trust Corpus (fiduciary relationships)
- Admin Keys as Agency (corporate governance)
- Revenue as General Intangibles (UCC Article 9)
- Holder Rights as Licenses (contractual permissions)

**Equitable Maxims Applied:**
- Equity regards as done that which ought to be done
- A grantor shall not derogate from his own grant
- Trust will not fail for want of a trustee
- Between equal equities, the first in time prevails

Each edition contains the complete legal archive: Cover Image, Executive Summary Audio, Blackpaper PDF, and 3 Comics documenting the mirror effect where institutional critiques reflect their own contradictions.

**444 editions total:**
- 443 offered to the world at $1777 each
- 1 Master Copy reserved as priceless
- 10% royalties on secondary sales

**Foundation Principle:**
"You've placed framework over foundation, that is a house built on sand. I've placed foundation before framework, that is a house built on a rock." — Jacque Antoine DeGraff

**The Doctrinal Mirror:**
Regulatory challenges to properly applied law become challenges to law itself. Any agency arguing against documented property rights, fiduciary relationships, and contractual licensing argues against the doctrinal basis of their own authority.

— Jacque Antoine DeGraff

*"The Truth Doesn't Need To Be Pushed, Only The Lie...The Lie Only Needs To Be Whispered, But The Truth Always Remains Silent waiting to be Witnessed."*

## ATTRIBUTES

**Author:** Jacque Antoine DeGraff
**Philosophy:** Master of Nothing, Student of All Things
**Education:** 9th Grade
**Collection:** Part Three
**Type:** Doctrinal Foundation
**Format:** Cover + Audio + PDF + 3 Comics
**Legal Framework:** Black's Law Dictionary
**Approach:** Foundation Before Framework
**Supply:** 444
**Public Supply:** 443
**Master Copy:** 1 Reserved
**Pricing:** $1777
**Max Per Wallet:** 1
**Royalties:** 10%
**Legal Strategy:** Apply Law Not Practice Compliance
**Demonstration:** Doctrinal Mirror Effect

## MEDIA FILES

**Cover Image:**
ipfs://bafybeib2ujzv6k3m5t4acypn7xs3nufobsiytyrcnxh6aeevrodbuuinwu
Type: image/png

**Executive Summary Audio:**
ipfs://bafybeihzptekqfp7fxcfwzi7bkh6ggwo3lmuzsrczv3k7gslktj6fh25di
Type: audio/mp3

**Blackpaper PDF:**
ipfs://bafybeicrpqrpazlwhyi4dzgw45ol2rmoo6sg4sjmbd4av53wk7zgzzxbiy
Type: application/pdf

**Comic 1 - The Donkey Question:**
ipfs://bafybeih4fwch34ot7wiz2m5wc5cvvwez5itpnkqanhcehyj4735kg4yntq
Type: image/png

**Comic 2 - Mirror Effect:**
ipfs://bafybeianuakdbawhlygcdx6dn5oqpifms7j3va4h4dwsbvjljr4cmqnuzm
Type: image/png

**Comic 3 - Foundation vs Framework:**
ipfs://bafybeihimxklbqmdi7ugtkvorblvzxers253le2lgvaqxxnfrhhzfuuyii
Type: image/png

## LEGAL FRAMEWORK

### Black's Law Dictionary Mappings

**Chose in Action**: "A right to intangible property that is enforceable by legal action, not by possession"
- Application: NFTs and tokens represent enforceable claims to access, licensing, and platform utility

**Trust Corpus**: "Property held in a fiduciary relationship for the benefit of beneficiaries"
- Application: Master files and provenance seed held in irrevocable trust with documented fiduciary duties

**Agency**: "A fiduciary relationship in which an agent acts on behalf of a principal"
- Application: Admin keys operate as corporate agents under documented resolutions

**General Intangibles**: "Rights to payment and other rights that are not evidenced by tangible property"
- Application: Royalty streams and revenue rights eligible for UCC Article 9 perfection

**License**: "Permission to do something that would otherwise be unlawful"
- Application: Token holders receive defined permissions; no implied assignment of underlying IP

### Equitable Maxims

**"Equity regards as done that which ought to be done"**
- On-chain entitlements mirror enforceable equitable rights

**"A grantor shall not derogate from his own grant"**
- Protects holders from retroactive revocation of licensed rights

**"Trust will not fail for want of a trustee"**
- Successor mechanisms ensure continuity of fiduciary relationships

**"Between equal equities, the first in time prevails"**
- On-chain timestamps establish priority for provenance claims

## CONTRACT FEATURES

- ERC-721 standard with enumerable extension
- ERC-2981 royalty standard (10%)
- 1 edition per wallet maximum
- Immutable provenance system
- Flexible treasury management
- 444 total supply with reserved Master Copy
- Foundation-first legal architecture
- Doctrinal mirror demonstration

## ECONOMIC PHILOSOPHY

The pricing at $1777 reflects the comprehensive legal foundation rather than speculative value. The system operates on abundance principles where Truth is offered complete and unguarded, allowing secondary markets to demonstrate institutional translation patterns through their repricing activities.

The 10% royalties capture value from institutional reframing while maintaining the original doctrinal foundation. Market responses become evidence supporting the framework rather than validation requirements.

## DEPLOYMENT CONFIGURATION

**Network:** Base (recommended) or any EVM chain
**Standard:** ERC-721
**Total Supply:** 444
**Public Sale:** 443 editions
**Reserved:** 1 Master Copy to 0x67BF9f428d92704C3Db3a08dC05Bc941A8647866
**Royalty Recipient:** 0x67BF9f428d92704C3Db3a08dC05Bc941A8647866
**Royalty Percentage:** 10%
**Contract Symbol:** LAWS
```

I've created the complete metadata package for "The Truth Part Three - Applying The Law's & Creating The Blackpaper" in all three formats (JSON, CSV, and Markdown).

The metadata captures the doctrinal foundation theme with specific references to Black's Law Dictionary principles, the foundation-before-framework philosophy, and the legal mappings you've established. All six files are properly integrated (cover, audio, PDF, and three comics), with the supply structure of 444 total editions (443 public + 1 Master Copy) at $1777 pricing.

The description emphasizes the core legal concepts - choses in action, trust corpus, agency relationships, and equitable maxims - while maintaining the philosophical consistency with your broader Truth ecosystem. The traits include legal strategy elements that distinguish this collection as the doctrinal foundation piece.